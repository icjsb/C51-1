C51 COMPILER V9.60.0.0   DS1302                                                            01/22/2021 23:32:47 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE DS1302
OBJECT MODULE PLACED IN .\out\Debug\DS1302.o
COMPILER INVOKED BY: D:\Chipenvironment\keilC51\C51\BIN\C51.exe .\SRC\DS1302.C PRINT(.\out\Debug\DS1302.lst) OMF2 TABS(4
                    -) CODE NOCOND SYMBOLS OPTIMIZE(8,SPEED) SMALL ROM(LARGE) INCDIR(.\src) DEFINE(DEBUG,__UVISION_VERSION=526) OBJECT(.\out\
                    -Debug\DS1302.o)

line level    source

   1          #include"DS1302.h"
*** WARNING C318 IN LINE 1 OF .\SRC\DS1302.C: can't open file 'DS1302.h'
   2          #include"12864libs.h"
*** WARNING C318 IN LINE 2 OF .\SRC\DS1302.C: can't open file '12864libs.h'
   3          #include"string.h"
   4          #include"delay.h"
*** WARNING C318 IN LINE 4 OF .\SRC\DS1302.C: can't open file 'delay.h'
   5          uchar str[21],str1[21];
*** ERROR C129 IN LINE 5 OF .\SRC\DS1302.C: missing ';' before 'str'
   6          uchar temp;
   7          void main()
   8          {
   9               LCD12864_init();
  10               //设置XX年,XX月,XX日,XX时,XX分,XX秒,星期X,12/24
  11               DS1302_init();
  12               //设置2021年
  13               DS1302_Write_Data(YearWrite,0x21);
  14               //设置1月份
  15               DS1302_Write_Data(MonthWrite,0x01);
  16               //设置22号
  17               DS1302_Write_Data(DateWrite,0x22);
  18               //设置星期四
  19               DS1302_Write_Data(DayWrite,0x04);
  20               //设置7时,12小时制
  21               DS1302_Write_Data(HourWrite,0xA7);
  22               //设置02分
  23               DS1302_Write_Data(MinuteWrite,0x02);
  24               //设置00秒
  25               DS1302_Write_Data(SecondWrite,0x00);
  26               while(1)
  27               {    
  28                    //LCD12864_clear_DDRAM();刷新屏幕
  29                    //合成"20XX年"字符串
  30                    String_numtostring(2000+DS1302_convert_Data(YearRead,DS1302_Read_Data(YearRead)),str);
  31                    String_mergestring(str,"年",String_strlen(str),String_strlen("年"),str);
  32                    LCD12864_showstring(str,0,0);
  33                    //合成"01月"字符串
  34                    String_numtostring(DS1302_convert_Data(MonthRead,DS1302_Read_Data(MonthRead)),str);
  35                    String_mergestring(str,"月",String_strlen(str),String_strlen("月"),str);
  36                    LCD12864_showstring(str,0,4);
  37                    //合成"20日"字符串
  38                    String_numtostring(DS1302_convert_Data(DateRead,DS1302_Read_Data(DateRead)),str);
  39                    String_mergestring(str,"日",String_strlen(str),String_strlen("日"),str);
  40                    LCD12864_showstring(str,0,6);
  41          
  42                    temp=DS1302_Read_Data(HourRead);
  43                    if(temp>>7)
  44                    {
  45                         if((temp>>5)%2)
  46                         {
  47                             LCD12864_showstring("PM",2,1);
  48                         }
  49                         else 
C51 COMPILER V9.60.0.0   DS1302                                                            01/22/2021 23:32:47 PAGE 2   

  50                         {
  51                             LCD12864_showstring("AM",2,1);
  52                         }
  53                    }
  54                    
  55                    temp=DS1302_Read_Data(DayRead);
  56                    switch (temp)
  57                    {
  58                    case 1:LCD12864_showstring("星期一",1,3);
  59                           break;
  60                    case 2:LCD12864_showstring("星期二",1,3);
  61                           break;
  62                    case 3:LCD12864_showstring("星期三",1,3);
  63                           break;
  64                    case 4:LCD12864_showstring("星期四",1,3);
  65                           break;
  66                    case 5:LCD12864_showstring("星期五",1,3);
  67                           break;
  68                    case 6:LCD12864_showstring("星期六",1,3);
  69                           break; 
  70                    case 7:LCD12864_showstring("星期日",1,3);
  71                           break;     
  72                    }
  73          
  74                    String_numtostring(DS1302_convert_Data(HourRead,DS1302_Read_Data(HourRead)),str);
  75                    String_mergestring(str,":",String_strlen(str),String_strlen(":"),str);
  76                    String_numtostring(DS1302_convert_Data(MinuteRead,DS1302_Read_Data(MinuteRead)),str1);
  77                    String_mergestring(str,str1,String_strlen(str),String_strlen(str1),str);
  78                    LCD12864_showstring(str,2,3);
  79          
  80                    temp=DS1302_Read_Data(SecondRead);
  81                    String_numtostring(DS1302_convert_Data(SecondRead,temp),str);
  82                    LCD12864_showstring(str,3,7);
  83                    delay1ms(900);
  84                    while(temp==DS1302_Read_Data(SecondRead));
  85               }
  86               
  87          }

C51 COMPILATION COMPLETE.  3 WARNING(S),  1 ERROR(S)
