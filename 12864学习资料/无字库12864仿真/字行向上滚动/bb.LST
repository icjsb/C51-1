C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE BB
OBJECT MODULE PLACED IN bb.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE bb.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #define  uchar  unsigned char
   3          #define  uint  unsigned int
   4          #define LCDLCDDisp_Off   0x3e
   5          #define LCDLCDDisp_On    0x3f
   6          #define Page_Add     0xb8//ye
   7          #define LCDCol_Add     0x40//lie
   8          #define Start_Line     0xC0//hang
   9          /*****液晶显示器的端口定义*****/
  10          #define data_ora P0 /*液晶数据总线*/
  11          sbit LCDMcs=P2^4 ;    /*片选1*/
  12          sbit LCDScs=P2^3 ;    /*片选2*/
  13          sbit LCDDi=P2^2 ;     /*数据/指令 选择*/
  14          sbit LCDRW=P2^1 ;     /*读/写 选择*/
  15          sbit LCDEnable=P2^0 ;     /*读/写 使能*/
  16          uchar code hz1[]=
  17          {
  18          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  19          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  20          /*------------------------------------------------------------------------------
  21            源文件 / 文字 : 武
  22            宽×高（像素）: 16×16
  23            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/32字节
  24            数据转换日期  : 2010-7-31 15:50:18
  25          ------------------------------------------------------------------------------*/
  26          0x20,0x20,0x24,0x24,0x24,0xA4,0x24,0x24,0x20,0xFF,0x20,0x22,0x2C,0x20,0x20,0x00,
  27          0x40,0xC0,0x7E,0x40,0x40,0x3F,0x22,0x22,0x20,0x03,0x0C,0x10,0x20,0x40,0xF8,0x00,
  28          /*------------------------------------------------------------------------------
  29            源文件 / 文字 : 汉
  30            宽×高（像素）: 16×16
  31            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/32字节
  32            数据转换日期  : 2010-7-31 15:51:45
  33          ------------------------------------------------------------------------------*/
  34          0x10,0x60,0x02,0x0C,0xC0,0x02,0x1E,0xE2,0x02,0x02,0x02,0xE2,0x1E,0x00,0x00,0x00,
  35          0x04,0x04,0x7C,0x03,0x80,0x80,0x40,0x20,0x13,0x0C,0x13,0x20,0x40,0x80,0x80,0x00,
  36          /*------------------------------------------------------------------------------
  37            源文件 / 文字 : 理
  38            宽×高（像素）: 16×16
  39            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/32字节
  40            数据转换日期  : 2010-7-31 15:52:29
  41          ------------------------------------------------------------------------------*/
  42          0x04,0x84,0x84,0xFC,0x84,0x84,0x00,0xFE,0x92,0x92,0xFE,0x92,0x92,0xFE,0x00,0x00,
  43          0x20,0x60,0x20,0x1F,0x10,0x10,0x40,0x44,0x44,0x44,0x7F,0x44,0x44,0x44,0x40,0x00,
  44          /*------------------------------------------------------------------------------
  45            源文件 / 文字 : 工
  46            宽×高（像素）: 16×16
  47            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/32字节
  48            数据转换日期  : 2010-7-31 15:53:19
  49          ------------------------------------------------------------------------------*/
  50          0x00,0x04,0x04,0x04,0x04,0x04,0x04,0xFC,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,
  51          0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
  52          
  53          /*------------------------------------------------------------------------------
  54            源文件 / 文字 : 大
  55            宽×高（像素）: 16×16
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 2   

  56            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/32字节
  57            数据转换日期  : 2010-7-31 15:53:53
  58          ------------------------------------------------------------------------------*/
  59          0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xFF,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
  60          0x80,0x80,0x40,0x20,0x10,0x0C,0x03,0x00,0x03,0x0C,0x10,0x20,0x40,0x80,0x80,0x00,
  61          
  62          /*------------------------------------------------------------------------------
  63            源文件 / 文字 : 学
  64            宽×高（像素）: 16×16
  65            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/32字节
  66            数据转换日期  : 2010-7-31 15:54:23
  67          ------------------------------------------------------------------------------*/
  68          0x40,0x30,0x11,0x96,0x90,0x90,0x91,0x96,0x90,0x90,0x98,0x14,0x13,0x50,0x30,0x00,
  69          0x04,0x04,0x04,0x04,0x04,0x44,0x84,0x7E,0x06,0x05,0x04,0x04,0x04,0x04,0x04,0x00,
  70          
  71          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  73          };
  74          uchar code hz2[]=
  75          {
  76          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  77          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  78          
  79          /*--  文字:  信  --*/
  80          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
  81          0x00,0x80,0x60,0xF8,0x07,0x00,0x04,0x24,0x24,0x25,0x26,0x24,0x24,0x24,0x04,0x00,
  82          0x01,0x00,0x00,0xFF,0x00,0x00,0x00,0xF9,0x49,0x49,0x49,0x49,0x49,0xF9,0x00,0x00,
  83          
  84          /*--  文字:  息  --*/
  85          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
  86          0x00,0x00,0x00,0xFC,0x54,0x54,0x56,0x55,0x54,0x54,0x54,0xFC,0x00,0x00,0x00,0x00,
  87          0x40,0x30,0x00,0x03,0x39,0x41,0x41,0x45,0x59,0x41,0x41,0x73,0x00,0x08,0x30,0x00,
  88          
  89          /*--  文字:  工  --*/
  90          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
  91          0x00,0x04,0x04,0x04,0x04,0x04,0x04,0xFC,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,
  92          0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
  93          
  94          /*--  文字:  程  --*/
  95          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
  96          0x24,0x24,0xA4,0xFE,0x23,0x22,0x00,0x3E,0x22,0x22,0x22,0x22,0x22,0x3E,0x00,0x00,
  97          0x08,0x06,0x01,0xFF,0x01,0x06,0x40,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x41,0x00,
  98          
  99          /*--  文字:  学  --*/
 100          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 101          0x40,0x30,0x11,0x96,0x90,0x90,0x91,0x96,0x90,0x90,0x98,0x14,0x13,0x50,0x30,0x00,
 102          0x04,0x04,0x04,0x04,0x04,0x44,0x84,0x7E,0x06,0x05,0x04,0x04,0x04,0x04,0x04,0x00,
 103          
 104          /*--  文字:  院  --*/
 105          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 106          0x00,0xFE,0x22,0x5A,0x86,0x10,0x0C,0x24,0x24,0x25,0x26,0x24,0x24,0x14,0x0C,0x00,
 107          0x00,0xFF,0x04,0x08,0x07,0x80,0x41,0x31,0x0F,0x01,0x01,0x3F,0x41,0x41,0x71,0x00,
 108          
 109          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 110          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 111          };
 112          uchar code hz3[]=
 113          {
 114          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 115          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 116          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 117          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 3   

 118          /*--  文字:  通  --*/
 119          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 120          0x40,0x42,0xCC,0x00,0x00,0xE2,0x22,0x2A,0x2A,0xF2,0x2A,0x26,0x22,0xE0,0x00,0x00,
 121          0x80,0x40,0x3F,0x40,0x80,0xFF,0x89,0x89,0x89,0xBF,0x89,0xA9,0xC9,0xBF,0x80,0x00,
 122          
 123          /*--  文字:  信  --*/
 124          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 125          0x00,0x80,0x60,0xF8,0x07,0x00,0x04,0x24,0x24,0x25,0x26,0x24,0x24,0x24,0x04,0x00,
 126          0x01,0x00,0x00,0xFF,0x00,0x00,0x00,0xF9,0x49,0x49,0x49,0x49,0x49,0xF9,0x00,0x00,
 127          
 128          /*--  文字:  工  --*/
 129          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 130          0x00,0x04,0x04,0x04,0x04,0x04,0x04,0xFC,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,
 131          0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
 132          
 133          /*--  文字:  程  --*/
 134          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 135          0x24,0x24,0xA4,0xFE,0x23,0x22,0x00,0x3E,0x22,0x22,0x22,0x22,0x22,0x3E,0x00,0x00,
 136          0x08,0x06,0x01,0xFF,0x01,0x06,0x40,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x41,0x00,
 137          
 138          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 139          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 140          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 141          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
 142          };
 143          uchar code hz4[]=
 144          {
 145          
 146          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 147          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 148          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 149          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 150          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 151          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 152          
 153          /*--  文字:  许  --*/
 154          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 155          0x40,0x40,0x42,0xCC,0x00,0x00,0x20,0x18,0x0F,0x08,0xF8,0x08,0x08,0x08,0x00,0x00,
 156          0x00,0x00,0x00,0x7F,0x20,0x10,0x01,0x01,0x01,0x01,0xFF,0x01,0x01,0x01,0x01,0x00,
 157          
 158          /*--  文字:  萍  --*/
 159          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 160          0x44,0x84,0x14,0x64,0x0F,0x24,0xA4,0x24,0x24,0xE4,0x2F,0x24,0xA4,0x24,0x04,0x00,
 161          0x08,0x09,0x78,0x04,0x03,0x04,0x04,0x05,0x04,0xFF,0x04,0x05,0x04,0x04,0x04,0x00,
 162          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 163          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 164          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 165          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 166          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 167          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
 168          
 169          };
 170          /****************************************************************************
 171          函数功能:LCD延时程序
 172          入口参数:t
 173          出口参数:
 174          ****************************************************************************/
 175          void LCDdelay(uchar x)
 176          {
 177   1      
 178   1      
 179   1         int d;
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 4   

 180   1         uchar y;
 181   1         for(y=0;y<x;y++)
 182   1         for(d=0;d<10;d++);
 183   1      }
 184          /****************************************************************************
 185          状态检查，LCD是否忙
 186          
 187          
 188          *****************************************************************************/
 189          void CheckState()               
 190          {
 191   1         uchar dat,DATA;//状态信息（判断是否忙）
 192   1         LCDDi=0; // 数据\指令选择，D/I（RS）="L" ，表示 DB7∽DB0 为显示指令数据 
 193   1         LCDRW=1; //R/W="H" ，E="H"数据被读到DB7∽DB0 
 194   1         do
 195   1         {
 196   2            DATA=0x00;
 197   2            LCDEnable=1;      //EN下降源
 198   2                LCDdelay(1);//延时
 199   2                dat=DATA;
 200   2            LCDEnable=0;
 201   2            dat=0x80 & dat; //仅当第7位为0时才可操作(判别busy信号)
 202   2          }
 203   1          while(!(dat==0x00));
 204   1      }
 205          /*****************************************************************************
 206          函数功能:写命令到LCD程序，RS(DI)=L,RW=L,EN=H，即来一个脉冲写一次
 207          入口参数:cmdcode
 208          出口参数:
 209          *****************************************************************************/
 210          void write_com(uchar cmdcode)
 211          {
 212   1          CheckState();//检测LCD是否忙
 213   1              LCDDi=0;
 214   1              LCDRW=0;
 215   1              P1=cmdcode;             
 216   1              LCDdelay(1);
 217   1              LCDEnable=1;
 218   1              LCDdelay(1);
 219   1              LCDEnable=0;
 220   1      }
 221          
 222          /*****************************************************************************
 223          函数功能:写数据到LCD程序，RS(DI)=H,RW=L,EN=H，即来一个脉冲写一次
 224          入口参数:LCDDispdata
 225          出口参数:
 226          *****************************************************************************/
 227          void write_data(uchar LCDDispdata)
 228          {
 229   1          CheckState();//检测LCD是否忙
 230   1              LCDDi=1;
 231   1              LCDRW=0;
 232   1              P1=LCDDispdata;
 233   1              LCDdelay(1);
 234   1              LCDEnable=1;
 235   1              LCDdelay(1);
 236   1              LCDEnable=0;
 237   1      }
 238          /*****************************************************************************
 239          /*****************************************************************************
 240          函数功能:LCD初始化程序
 241          入口参数:
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 5   

 242          出口参数:
 243          *****************************************************************************/
 244          void init_lcd()
 245          {
 246   1              LCDdelay(1);    
 247   1              LCDMcs=1;//刚开始关闭两屏
 248   1              LCDScs=1;
 249   1              LCDdelay(1);
 250   1              write_com(LCDLCDDisp_Off);       //写初始化命令
 251   1              write_com(Page_Add+0);
 252   1              write_com(Start_Line+0);
 253   1              write_com(LCDCol_Add+0);
 254   1              write_com(LCDLCDDisp_On);
 255   1      }
 256          /**************************************************************************
 257          函数功能:清除LCD内存程序
 258          入口参数:pag,col,hzk
 259          出口参数:
 260          *****************************************************************************/
 261          void Clr_Scr()
 262          {
 263   1              uchar j,k;
 264   1              LCDMcs=0; //左、右屏均开显示
 265   1              LCDScs=0;
 266   1              write_com(Page_Add+0);
 267   1              write_com(LCDCol_Add+0);
 268   1              for(k=0;k<8;k++)//控制页数0-7，共8页
 269   1              {
 270   2                      write_com(Page_Add+k); //每页每页进行写
 271   2                      for(j=0;j<64;j++)  //每页最多可写32个中文文字或64个ASCII字符
 272   2                      {
 273   3                      write_com(LCDCol_Add+j);
 274   3                              write_data(0x00);//控制列数0-63，共64列，写点内容，列地址自动加1
 275   3                      }
 276   2              }
 277   1      }
 278          /*****************************************************************************
 279          函数功能:一行一行显示
 280          入口参数:page,column,hzk
 281          出口参数:
 282          *****************************************************************************/
 283          Disp(uchar page,uchar column, uchar code *word)
 284          {
 285   1      uchar i;
 286   1      //左屏
 287   1      LCDMcs=0; 
 288   1      LCDScs=1;
 289   1      //上半字
 290   1      write_com(0xb8|page);
 291   1      write_com(0x40|column);
 292   1      for(i=0;i<16;i++)
 293   1      write_data(word[i]);
 294   1      for(i=32;i<48;i++)
 295   1      write_data(word[i]);
 296   1      for(i=64;i<80;i++)
 297   1      write_data(word[i]);
 298   1      for(i=96;i<112;i++)
 299   1      write_data(word[i]);
 300   1      //下半字
 301   1      write_com(0xb8|page+1);
 302   1      write_com(0x40|column);
 303   1      for(i=16;i<32;i++)
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 6   

 304   1      write_data(word[i]);
 305   1      for(i=48;i<64;i++)
 306   1      write_data(word[i]);
 307   1      for(i=80;i<96;i++)
 308   1      write_data(word[i]);
 309   1      for(i=112;i<128;i++)
 310   1      write_data(word[i]);
 311   1      //右屏
 312   1      LCDMcs=1; 
 313   1      LCDScs=0;
 314   1      //上半字
 315   1      write_com(0xb8|page);
 316   1      write_com(0x40);
 317   1      for(i=128;i<144;i++)
 318   1      write_data(word[i]);
 319   1      for(i=160;i<176;i++)
 320   1      write_data(word[i]);
 321   1      for(i=192;i<208;i++)
 322   1      write_data(word[i]);
 323   1      for(i=224;i<240;i++)
 324   1      write_data(word[i]);
 325   1      //下半字
 326   1      write_com(0xb8|page+1);
 327   1      write_com(0x40);
 328   1      for(i=144;i<160;i++)
 329   1      write_data(word[i]);
 330   1      for(i=176;i<192;i++)
 331   1      write_data(word[i]);
 332   1      for(i=208;i<224;i++)
 333   1      write_data(word[i]);
 334   1      for(i=240;i<250;i++)
 335   1      write_data(word[i]);
 336   1      }
 337          
 338          void main()
 339          { 
 340   1      uint k=0;
 341   1              init_lcd();
 342   1              Clr_Scr();
 343   1           k=0;
 344   1            for(k=0xc0;k<0xff;k++)
 345   1              {
 346   2                       Disp(0,0,hz1);
 347   2                       Disp(2,0,hz2);
 348   2                       Disp(4,0,hz3);
 349   2                       Disp(6,0,hz4);
 350   2               LCDMcs=0; 
 351   2               LCDScs=0;
 352   2                       write_com(k);
 353   2                       LCDdelay(2);
 354   2      
 355   2              }
 356   1      while(1)
 357   1          {
 358   2        
 359   2              }
 360   1      }
*** WARNING C290 IN LINE 336 OF BB.C: missing return value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    491    ----
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:09:48 PAGE 7   

   CONSTANT SIZE    =   1024    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
