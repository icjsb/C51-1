C51 COMPILER V9.00   BB                                                                    04/16/2015 19:02:57 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE BB
OBJECT MODULE PLACED IN bb.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE bb.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #define LCDLCDDisp_Off   0x3e
   3          #define LCDLCDDisp_On    0x3f
   4          #define Page_Add     0xb8//页地址
   5          #define LCDCol_Add     0x40//列地址
   6          #define Start_Line     0xC0//行地址
   7          /*****液晶显示器的端口定义*****/
   8          #define data_ora P0 /*液晶数据总线*/
   9          sbit LCDMcs=P2^4 ;    /*片选1*/
  10          sbit LCDScs=P2^3 ;    /*片选2*/
  11          sbit LCDDi=P2^2 ;     /*数据/指令 选择*/
  12          sbit LCDRW=P2^1 ;     /*读/写 选择*/
  13          sbit LCDEnable=P2^0 ;     /*读/写 使能*/
  14          
  15          
  16          
  17          unsigned char code Bmp1[]=
  18          {
  19          /*------------------------------------------------------------------------------
  20            源文件 / 文字 : 来自剪贴板!武汉理工大学
  21            宽×高（像素）: 128×16
  22            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  23            数据转换日期  : 2010-7-29 17:52:57
  24            显示的汉字：武汉理工大学
  25          ------------------------------------------------------------------------------*/
  26          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x00,0x00,0x20,0x20,0x24,0x24,0x24,0xE4,0x24,0x20,0x20,0xFE,0x20,0x24,0x28,0x20,
  28          0x00,0x20,0xC2,0x0C,0x80,0x60,0x04,0x7C,0x84,0x04,0x04,0xC4,0x3E,0x04,0x00,0x00,
  29          0x88,0x88,0xF8,0x88,0x88,0x00,0xFC,0x24,0x24,0xFC,0x24,0x24,0xFE,0x04,0x00,0x00,
  30          0x08,0x08,0x08,0x08,0x08,0xF8,0x08,0x08,0x08,0x08,0x0C,0x08,0x00,0x00,0x20,0x20,
  31          0x20,0x20,0x20,0x20,0xFE,0x20,0x20,0x20,0x20,0x20,0x30,0x20,0x00,0x40,0x30,0x10,
  32          0x52,0x5C,0x50,0x52,0x5C,0x50,0xD8,0x56,0x10,0x50,0x30,0x00,0x00,0x00,0x00,0x00,
  33          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  34          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x20,0x60,0x3F,0x20,0x20,0x1F,0x12,0x12,0x10,0x07,0x18,0x20,0x40,0x78,
  36          0x00,0x04,0x04,0x7E,0x41,0x40,0x20,0x10,0x0B,0x04,0x0B,0x10,0x20,0x60,0x20,0x00,
  37          0x10,0x30,0x1F,0x08,0x48,0x40,0x4B,0x49,0x49,0x7F,0x49,0x49,0x6B,0x40,0x08,0x20,
  38          0x20,0x20,0x20,0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x20,0x30,0x20,0x00,0x40,0x40,
  39          0x20,0x10,0x08,0x06,0x01,0x02,0x04,0x08,0x10,0x20,0x60,0x20,0x00,0x04,0x04,0x04,
  40          0x04,0x04,0x24,0x44,0x3F,0x05,0x04,0x04,0x04,0x06,0x04,0x00,0x00,0x00,0x00,0x00,
  41          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  42          };
  43          unsigned char code Bmp2[]=
  44          {
  45          /*------------------------------------------------------------------------------
  46            源文件 / 文字 : 信息工程学院
  47            宽×高（像素）: 128×16
  48            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  49            数据转换日期  : 2010-7-29 18:34:04
  50            显示的汉字：信息工程学院
  51          ------------------------------------------------------------------------------*/
  52          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  53          0x00,0x80,0x40,0xF0,0x0E,0x00,0x28,0x28,0x28,0x2A,0x2C,0x28,0x28,0x28,0x08,0x00,
  54          0x00,0x00,0x00,0xF8,0xA8,0xAC,0xAA,0xA8,0xA8,0xA8,0xFC,0x08,0x00,0x00,0x00,0x00,
  55          0x08,0x08,0x08,0x08,0x08,0xF8,0x08,0x08,0x08,0x08,0x0C,0x08,0x00,0x00,0x20,0x24,
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:02:57 PAGE 2   

  56          0xA4,0xFC,0x26,0x24,0x00,0x7C,0x24,0x24,0x24,0x24,0x7C,0x00,0x00,0x40,0x30,0x10,
  57          0x52,0x5C,0x50,0x52,0x5C,0x50,0xD8,0x56,0x10,0x50,0x30,0x00,0x00,0xFC,0x04,0x64,
  58          0x9C,0x20,0x58,0x48,0x4A,0x4C,0x48,0x48,0x18,0x08,0x00,0x00,0x00,0x00,0x00,0x00,
  59          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  60          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  61          0x00,0x00,0x00,0x7F,0x00,0x00,0x01,0x7D,0x25,0x25,0x25,0x25,0x7D,0x01,0x00,0x00,
  62          0x00,0x20,0x18,0x03,0x3A,0x42,0x46,0x5A,0x42,0x42,0x73,0x00,0x08,0x30,0x00,0x20,
  63          0x20,0x20,0x20,0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x20,0x30,0x20,0x00,0x08,0x06,
  64          0x01,0x7F,0x01,0x42,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x41,0x00,0x04,0x04,0x04,
  65          0x04,0x04,0x24,0x44,0x3F,0x05,0x04,0x04,0x04,0x06,0x04,0x00,0x00,0x7F,0x04,0x08,
  66          0x47,0x41,0x21,0x1F,0x01,0x01,0x3F,0x41,0x41,0x79,0x00,0x00,0x00,0x00,0x00,0x00,
  67          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  68          };
  69          unsigned char code Bmp3[]=
  70          {
  71          /*------------------------------------------------------------------------------
  72            源文件 / 文字 : 通信工程
  73            宽×高（像素）: 128×
  74            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  75            数据转换日期  : 2010-7-29 18:36:04
  76            显示汉字：通信工程
  77          ------------------------------------------------------------------------------*/
  78          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  79          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x42,
  80          0xCC,0x00,0x00,0xF4,0x54,0x5C,0xF4,0x5C,0x56,0xF4,0x00,0x00,0x00,0x80,0x40,0xF0,
  81          0x0E,0x00,0x28,0x28,0x28,0x2A,0x2C,0x28,0x28,0x28,0x08,0x00,0x00,0x08,0x08,0x08,
  82          0x08,0x08,0xF8,0x08,0x08,0x08,0x08,0x0C,0x08,0x00,0x00,0x20,0x24,0xA4,0xFC,0x26,
  83          0x24,0x00,0x7C,0x24,0x24,0x24,0x24,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  84          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  85          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  86          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  87          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x10,
  88          0x0F,0x10,0x20,0x5F,0x42,0x42,0x5F,0x42,0x52,0x5F,0x40,0x40,0x00,0x00,0x00,0x7F,
  89          0x00,0x00,0x01,0x7D,0x25,0x25,0x25,0x25,0x7D,0x01,0x00,0x00,0x20,0x20,0x20,0x20,
  90          0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x20,0x30,0x20,0x00,0x08,0x06,0x01,0x7F,0x01,
  91          0x42,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x41,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  92          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  93          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  94          };
  95          unsigned char code Bmp4[]=
  96          {
  97          /*------------------------------------------------------------------------------
  98            源文件 / 文字 : 0606班
  99            宽×高（像素）: 128×16
 100            字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
 101            数据转换日期  : 2010-7-29 18:37:59
 102            显示的汉字：0606班
 103          ------------------------------------------------------------------------------*/
 104          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 105          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 106          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x20,0x10,0x10,0x20,0xC0,0x00,0x00,0xC0,
 107          0x20,0x10,0x10,0x30,0x00,0x00,0x00,0xC0,0x20,0x10,0x10,0x20,0xC0,0x00,0x00,0xC0,
 108          0x20,0x10,0x10,0x30,0x00,0x00,0x44,0x44,0xFC,0x44,0x04,0xC0,0x00,0xFE,0x84,0x84,
 109          0xFC,0x84,0x84,0x84,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 110          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 111          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 112          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 113          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 114          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,0x00,0x1F,
 115          0x22,0x21,0x21,0x21,0x1E,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,0x00,0x1F,
 116          0x22,0x21,0x21,0x21,0x1E,0x00,0x10,0x10,0x0F,0x48,0x28,0x11,0x08,0x27,0x20,0x20,
 117          0x3F,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:02:57 PAGE 3   

 118          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 119          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
 120          };
 121          /****************************************************************************
 122          函数功能:LCD延时程序
 123          入口参数:t
 124          出口参数:
 125          ****************************************************************************/
 126          void LCDdelay(unsigned int t)
 127          {
 128   1              unsigned int i,j;
 129   1              for(i=0;i<t;i++);
 130   1              for(j=0;j<10;j++);
 131   1      }
 132          /****************************************************************************
 133          状态检查，LCD是否忙
 134          
 135          
 136          *****************************************************************************/
 137          void CheckState()               
 138          {
 139   1         unsigned char dat,DATA;//状态信息（判断是否忙）
 140   1         LCDDi=0; // 数据\指令选择，D/I（RS）="L" ，表示 DB7∽DB0 为显示指令数据 
 141   1         LCDRW=1; //R/W="H" ，E="H"数据被读到DB7∽DB0 
 142   1         do
 143   1         {
 144   2            DATA=0x00;
 145   2            LCDEnable=1;      //EN下降源
 146   2                LCDdelay(2);//延时
 147   2                dat=DATA;
 148   2            LCDEnable=0;
 149   2            dat=0x80 & dat; //仅当第7位为0时才可操作(判别busy信号)
 150   2          }
 151   1          while(!(dat==0x00));
 152   1      }
 153          /*****************************************************************************
 154          函数功能:写命令到LCD程序，RS(DI)=L,RW=L,EN=H，即来一个脉冲写一次
 155          入口参数:cmdcode
 156          出口参数:
 157          *****************************************************************************/
 158          void write_com(unsigned char cmdcode)
 159          {
 160   1          CheckState();//检测LCD是否忙
 161   1              LCDDi=0;
 162   1              LCDRW=0;
 163   1              P1=cmdcode;             
 164   1              LCDdelay(2);
 165   1              LCDEnable=1;
 166   1              LCDdelay(2);
 167   1              LCDEnable=0;
 168   1      }
 169          /*****************************************************************************
 170          函数功能:LCD初始化程序
 171          入口参数:
 172          出口参数:
 173          *****************************************************************************/
 174          void init_lcd()
 175          {
 176   1              LCDdelay(100);  
 177   1              LCDMcs=1;//刚开始关闭两屏
 178   1              LCDScs=1;
 179   1              LCDdelay(100);
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:02:57 PAGE 4   

 180   1              write_com(LCDLCDDisp_Off);       //写初始化命令
 181   1              write_com(Page_Add+0);
 182   1              write_com(Start_Line+0);
 183   1              write_com(LCDCol_Add+0);
 184   1              write_com(LCDLCDDisp_On);
 185   1      }
 186          /*****************************************************************************
 187          函数功能:写数据到LCD程序，RS(DI)=H,RW=L,EN=H，即来一个脉冲写一次
 188          入口参数:LCDDispdata
 189          出口参数:
 190          *****************************************************************************/
 191          void write_data(unsigned char LCDDispdata)
 192          {
 193   1          CheckState();//检测LCD是否忙
 194   1              LCDDi=1;
 195   1              LCDRW=0;
 196   1              P1=LCDDispdata;
 197   1              LCDdelay(2);
 198   1              LCDEnable=1;
 199   1              LCDdelay(2);
 200   1              LCDEnable=0;
 201   1      }
 202          /*****************************************************************************
 203          函数功能:清除LCD内存程序
 204          入口参数:pag,col,hzk
 205          出口参数:
 206          *****************************************************************************/
 207          void Clr_Scr()
 208          {
 209   1              unsigned char j,k;
 210   1              LCDMcs=0; //左、右屏均开显示
 211   1              LCDScs=0;
 212   1              write_com(Page_Add+0);
 213   1              write_com(LCDCol_Add+0);
 214   1              for(k=0;k<8;k++)//控制页数0-7，共8页
 215   1              {
 216   2                      write_com(Page_Add+k); //每页每页进行写
 217   2                      for(j=0;j<64;j++)  //每页最多可写32个中文文字或64个ASCII字符
 218   2                      {
 219   3                      write_com(LCDCol_Add+j);
 220   3                              write_data(0x00);//控制列数0-63，共64列，写点内容，列地址自动加1
 221   3                      }
 222   2              }
 223   1      }
 224          /*****************************************************************************
 225          函数功能:左屏位置显示
 226          入口参数:page,column,hzk
 227          出口参数:
 228          *****************************************************************************/
 229          void Bmp_Left_Disp(unsigned char page,unsigned char column, unsigned char code *Bmp)
 230          {
 231   1              unsigned char j=0,i=0;
 232   1              for(j=0;j<2;j++)
 233   1              {
 234   2                      write_com(Page_Add+page+j);
 235   2                      write_com(LCDCol_Add+column);
 236   2                      for(i=0;i<64;i++) 
 237   2                              write_data(Bmp[128*j+i]);
 238   2              }
 239   1      }
 240          /*****************************************************************************
 241          函数功能:右屏位置显示
C51 COMPILER V9.00   BB                                                                    04/16/2015 19:02:57 PAGE 5   

 242          入口参数:page,column,hzk
 243          出口参数:
 244          *****************************************************************************/
 245          void Bmp_Right_Disp(unsigned char page,unsigned char column, unsigned char code *Bmp)
 246          {
 247   1              unsigned char j=0,i=0;
 248   1              for(j=0;j<2;j++)
 249   1              {
 250   2                      write_com(Page_Add+page+j);
 251   2                      write_com(LCDCol_Add+column);
 252   2                      for(i=64;i<128;i++) 
 253   2                              write_data(Bmp[128*j+i]);
 254   2              }
 255   1      }
 256          
 257          
 258          void main()
 259          {
 260   1              init_lcd();
 261   1              Clr_Scr();
 262   1              LCDMcs=0; //左屏开显示
 263   1              LCDScs=1;
 264   1              Bmp_Left_Disp(0,0,Bmp1);// Bmp1为某个汉字的首地址
 265   1          Bmp_Left_Disp(2,0,Bmp2);
 266   1          Bmp_Left_Disp(4,0,Bmp3);
 267   1          Bmp_Left_Disp(6,0,Bmp4);
 268   1          LCDMcs=1; //右屏开显示
 269   1              LCDScs=0;
 270   1          Bmp_Right_Disp(0,0,Bmp1);
 271   1          Bmp_Right_Disp(2,0,Bmp2);
 272   1          Bmp_Right_Disp(4,0,Bmp3);
 273   1          Bmp_Right_Disp(6,0,Bmp4);
 274   1              while(1)
 275   1          {
 276   2        
 277   2              }
 278   1                 }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    442    ----
   CONSTANT SIZE    =   1024    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
